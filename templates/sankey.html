<html>
<head>

    <title>Mrt To Submtz Sankey Chart</title>
    <script src="http://d3js.org/d3.v3.min.js"></script>

</head>
<body>
  <h1> Key in your parameters below: </h1>
  <form>
      <label for="date">Date (format: yyyymmdd):</label>
      <input type="text" name="date" id='date' value="20150809" autofocus>
      <br>
      <label for="time_start">Time start (format: hh:mm:ss):</label>
      <input type="text" name="time_start" id='time_start' value="18:00:00" autofocus>
      <br>
      <label for="time_end">Time end (format: hh:mm:ss):</label>
      <input type="text" name="time_end" id='time_end' value="19:00:00" autofocus>
      <br>
      <label for="submtz">Submtz:</label>
      <input type="text" name="submtz" id='submtz' value="601" autofocus>
      <br>
      <br>
      <label for="DakotaToSect2p1">Number from Dakota to Section 2.1:</label>
      <input type="text" name="DakotaToSect2p1" id='DakotaToSect2p1' value="100" autofocus>
      <br>
      <br>
      <label for="KallangToSect2p1">Number from Kallang to Section 2.1:</label>
      <input type="text" name="KallangToSect2p1" id='KallangToSect2p1' value="100" autofocus>
      <br>
      <br>
      <label for="MountbattenToSect2p1">Number from Mountbatten to Section 2.1:</label>
      <input type="text" name="MountbattenToSect2p1" id='MountbattenToSect2p1' value="100" autofocus>
      <br>
      <br>
      <label for="StadiumToSect2p1">Number from Stadium to Section 2.1:</label>
      <input type="text" name="StadiumToSect2p1" id='StadiumToSect2p1' value="100" autofocus>
      <br>
      <br>

      <!-- <input type="submit" value="Submit"> -->

      <input type="button" value="submit" onclick="drawChart()" />

  </form>

  <script type="text/javascript"
           src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1.1','packages':['sankey']}]}">
  </script>

  <div id="sankey_multiple" style="width: 1000px; height: 600px;"></div>

  <script type="text/javascript">

    google.setOnLoadCallback(drawChart);
    function drawChart() {
      console.log('in drawChart');
      //console.log(document.getElementById('DakotaToSect2p1').value)
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'From');
      data.addColumn('string', 'To');
      data.addColumn('number', 'Count');
      data.addRows([
        ['Dakota','Section2.1', Number(document.getElementById('DakotaToSect2p1').value)],
        ['Kallang','Section2.1', Number(document.getElementById('KallangToSect2p1').value)],
        ['Mountbatten','Section2.1', Number(document.getElementById('MountbattenToSect2p1').value)],
        ['Stadium','Section2.1', Number(document.getElementById('StadiumToSect2p1').value)],

      ]);

      // Set chart options
      // #000080 : dark blue
      // #FFA500 : orange
      // #ADD8E6 : light blue
      // #FF69B4 : pink
      var colors = ['#FF0000', '#000080', '#FFA500', '#ADD8E6', '#FF69B4', '#00FF00', '#0000FF', '#000000'];

      var options = {
        width: 800,
        sankey: {
          node: {
            colors: colors
          },
        }
      };

      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.Sankey(document.getElementById('sankey_multiple'));
      chart.draw(data, options);
    }

    d3.csv("/static/20150809_test.csv", function(csv){
       //console.log("csv read");
       console.log(csv.length);
       console.log(csv[0]);
       console.log(csv[0]['submtz']);
       console.log(csv[0]['mrtStn1']);
     });
  </script>

</body>
</html>
